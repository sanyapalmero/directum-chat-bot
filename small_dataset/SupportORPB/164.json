{
    "support": "support orpb",
    "messages": [
        {
            "sender": "user",
            "message": "доброе утро"
        },
        {
            "sender": "support",
            "message": "привет. пока есть другие консультации"
        },
        {
            "sender": "user",
            "message": "я сюда вопрос тогда пока напишу, как сможете, пжл ответьте, ок?"
        },
        {
            "sender": "user",
            "message": "вопрос по блокам типовых маршрутов: есть ли возможность на прикладном уровне при падении блока типа сценарий сделать так, чтобы тм не падал с ошибкой, а попытался повторно выполнить этот же блок через какое-то время?"
        },
        {
            "sender": "user",
            "message": "а когда примерно ждать ответа? через часа, или дольше?"
        },
        {
            "sender": "support",
            "message": "не знаю. как пойдут предконсультации"
        },
        {
            "sender": "support",
            "message": "с какой именно ошибкой падает блок? ошибка в вычислениях?"
        },
        {
            "sender": "user",
            "message": "да. там блок с в случае возникновения исключения, который может упасть при попытке изменения в случае блокировки изменяемого объекта."
        },
        {
            "sender": "support",
            "message": "перечитала раза. исключение может упасть при попытке поставить блокировку? тогда лучше перед проставкой блокировки проверять возможность поставки блокировки в общем случае, если ошибка падает и она критияная, то тм падает тоже есть ряд некритичных ошибок, при возникновении которых тм откладывается где-то они должны быть описаны"
        },
        {
            "sender": "user",
            "message": "и потом может повторно выполниться этот же блок сценария?"
        },
        {
            "sender": "support",
            "message": "ну если тм отложится, то да, будет повторно выполнятся блоки, коотрые не выолпнились"
        },
        {
            "sender": "user",
            "message": "опишу смысл, чтобы стало понятнее. есть блок сценарий, в котором в цикле изменяются стадия жц переданных на вход документов. при этом если какой-то документ заблокирован, то он обновлен не будет. нужно чтобы в этом случае была возможность \"приостановить\" выполнее выполнение тма на этом блоке сценария и через некоторое время повтроно его выпонлить, чтобы доки, которые не обновились попытались обновиться еще раз, если они уже разблокированы как раз получается что нужно вызвать некритичную ошибку?"
        },
        {
            "sender": "support",
            "message": "а разве это не решается тсандартно с помощью мониторинга или ожиадния. на крайняк есть блок пауза но с ней заморочки побольше явно вот то, что ты описал прям прикладным кодом не сделать"
        },
        {
            "sender": "user",
            "message": "дело в том, что блок сценарий уже есть в тмах, если его менять на другой блок, то возникнет огромная морока при конвертации системы с уже запущенными ранее задачами. поэтому хотелось бы именно через блок сценарий это сделать, просто его вычисления поменять и все то есть в прикладном коде я никак не смогу вызвать на сценарии некритичную ошибку, которая позволила бы \"приостановить\" тм на этом блоке и потмо повторно его выполнить?"
        },
        {
            "sender": "support",
            "message": "можно. но все вычисления так же откатятся. то есть все жц которые уже былаи поменяны, не сохранятся так как выполняение блока идет в транзакции и транзация откатывается при возникновении ошикби, чтобы не было недовыполненнях изменений"
        },
        {
            "sender": "user",
            "message": "а если каждый док-т обновлять в транзакции, то после отката общей транзакции эти \"внутренние\" транзакции также откатятся или нет?"
        },
        {
            "sender": "support",
            "message": "да, должны можно попробовать создавать отдельное соединения и через него работать возможно в таком случае не октатятся"
        },
        {
            "sender": "user",
            "message": "я правильно понимаю, что в этом случае обновлять каждый документ надо будет запросами? или с помощью чего создавать отдельное соединение?"
        },
        {
            "sender": "support",
            "message": "нет. просто создай соединение, получай через него документ, затем с ним работай. только тут осторожно надо. так как у тебя могут в половинчатом состоянии документы остаться. но то есть например надо сменить стадию жц наименоване. у тебя стадия сменится, а нименоенование нет, если где-то посередине возникнет ошибка."
        },
        {
            "sender": "support",
            "message": "а, ну и да. параметры, тоже откатятся, если откатится выполнение по блоку"
        },
        {
            "sender": "support",
            "message": "а вот тут перечислены исклбчения <url>"
        },
        {
            "sender": "user",
            "message": "спасибо большое за помощь!"
        },
        {
            "sender": "support",
            "message": "ок, пожалуйста"
        }
    ]
}